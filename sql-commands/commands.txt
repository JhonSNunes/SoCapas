CREATE TABLE PRODUCTS (
	CDPRODUCT INTEGER NOT NULL AUTO_INCREMENT,
	IDPRODUCT VARCHAR (50) NOT NULL,
	NMPRODUCT VARCHAR (255) NOT NULL,
	DSPRODUCT VARCHAR (4000),
	VLPRODUCT DOUBLE(18,8),
	QTPRODUCT INTEGER,
	PRIMARY KEY (CDPRODUCT)
);

CREATE TABLE IMAGES (
	CDIMAGE INTEGER NOT NULL AUTO_INCREMENT,
	IMGFILE LONGBLOB,
	PRIMARY KEY (CDIMAGE)
);

CREATE TABLE PRODUCTIMAGES (
	CDPRODUCTIMAGE INTEGER NOT NULL AUTO_INCREMENT,
	CDPRODUCT INTEGER NOT NULL,
	CDIMAGE INTEGER NOT NULL,
	PRIMARY KEY (CDPRODUCTIMAGE),
	CONSTRAINT FKCDPRODUCT_1 FOREIGN KEY (CDPRODUCT) REFERENCES PRODUCTS(CDPRODUCT),
	CONSTRAINT FKCDIMAGE_1 FOREIGN KEY (CDIMAGE) REFERENCES IMAGES(CDIMAGE)
);

CREATE TABLE USERS (
	CDUSER INTEGER NOT NULL AUTO_INCREMENT,
	NMUSER VARCHAR(255),
	LOGIN VARCHAR(50),
	PASSWORD VARCHAR(128),
	NMCOUNTRY VARCHAR(255),
	NMSTATE VARCHAR(255),
	NMCITY VARCHAR(255),
	NMPHONE VARCHAR(32),
	FGTYPE INTEGER,
	CDIMAGE INTEGER,
	PRIMARY KEY (CDUSER),
	CONSTRAINT FKCDIMAGE_2 FOREIGN KEY (CDIMAGE) REFERENCES IMAGES(CDIMAGE)
);

CREATE TABLE BUDGETS (
	CDBUDGET INTEGER NOT NULL AUTO_INCREMENT,
	NMBUDGET VARCHAR(255),
	DSBUDGET VARCHAR(4000),
	CDUSER INTEGER NOT NULL,
	PRIMARY KEY (CDBUDGET),
	CONSTRAINT FKCDUSER_1 FOREIGN KEY (CDUSER) REFERENCES USERS(CDUSER)
);

CREATE TABLE BUDGETSIMAGES (
	CDBUDGETIMAGE INTEGER NOT NULL AUTO_INCREMENT,
	CDBUDGET INTEGER NOT NULL,
	CDIMAGE INTEGER NOT NULL,
	PRIMARY KEY (CDBUDGETIMAGE),
	CONSTRAINT FKCDBUDGET_1 FOREIGN KEY (CDBUDGET) REFERENCES BUDGETS(CDBUDGET),
	CONSTRAINT FKCDIMAGE_3 FOREIGN KEY (CDIMAGE) REFERENCES IMAGES(CDIMAGE)
);

################################### INSERT INICIAL #############################

INSERT INTO PRODUCTS (
	IDPRODUCT,
	NMPRODUCT,
	DSPRODUCT,
	VLPRODUCT,
	QTPRODUCT
) VALUES (
	'BC001',
	'Bolsa para consignado - Marca X',
	'Bolsa em nilon 600 com al√ßas duplas',
	55,
	30
);